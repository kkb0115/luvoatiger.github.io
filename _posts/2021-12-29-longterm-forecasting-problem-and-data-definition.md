---
layout: post
title: 장기 부하 예측 문제 정의 및 제약 사항 분석
date: 2021-12-29
excerpt: "longterm forecasting problem and constraints definition"
tags: [long term forecasting]
comment: true
---

# 개요
회사에서 풀려고 시도했던 장기 부하 예측 문제의 전체적인 히스토리를 정리하는 페이지. 정리할 내용은 다음과 같다.
- 요구사항 분석 및 제약 사항 확인
- 데이터 명세 및 DB 스키마 정의
- 데이터 분석 및 알고리즘 개발
- 예측 결과 시각화


## 요구사항 배경
- 대규모 IT 시스템을 운영하는 회사에서는 부하를 처리할 수 있도록 시스템 용량을 계획한다. 이를 capacity planning이라고 한다.
- capacity planning에서 장비를 추가할지 의사 결정을 내려야 하는데, 추가하기로 해도 실제로 시스템이 증설되기까지 오래 걸린다.
- 따라서 현재까지의 데이터를 바탕으로 설비가 추가될 시점의 성능 지표 값을 정확히 예측해서, 장비 증설 여부를 결정하려는 것이다.


## 요구사항 분석
- 현재까지의 데이터를 바탕으로 최소 3개월부터 최대 12개월 뒤의 성능 지표 값을 추정한다.
- 예측 정확도를 높이기 위해, 학습 데이터의 기간에 따라서 예측 기간을 자동으로 산출하도록 한다.

## 제약 사항
- 프로젝트를 시작하고 나서부터 실제 데이터를 수집하게 되므로, 학습 데이터 양이 적다. 프로젝트는 보통 몇 개월 단위로만 진행되고 데이터는 일단위로 집계되므로, Row가 수십개 정도만 수집된다. 따라서, 알고리즘을 고안할 때 계산량(학습 시간 및 CPU, 메모리 사용량)을 고려해야 한다.


- 예측 결과를 타당하게 해석할 수 있는 알고리즘을 설계해야 한다. 예를 들어, 초당 트랜잭션 건수(TPS) 지표의 예측값이 장기간 발산하거나 0으로 수렴해버리면 이는 장애가 장기간 이어질 것으로 추정된다는 뜻이다. 하지만, 실제로는 고객사에서 장애를 바로 조치할 것이기 떄문에 장애는 심하면 보통 몇 시간 정도 이어진다. 따라서 수개월 동안 계속 장애가 예측된다면 고객사는 해당 알고리즘을 신뢰할 수 없다.


- 지표별로 패턴이 전부 다른데, 솔루션에 탑재되기 때문에 이를 전부 고려해서 자동화 된 알고리즘을 작성해야 한다. 예를 들어, 모델러가 ACF plot, PACF plot을 보고 지표별로 모형의 파라미터를 따로 조정하는 것처럼 모델링 과정에 직접 개입할 수 없다.
